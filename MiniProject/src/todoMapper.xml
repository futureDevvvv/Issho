<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- namespace : interface의 full name parameterType : 파라미터로 전달되는 객체의 full 
	name insert, update, delete => resultType을 지정하지 않아야 한다. -->

<mapper namespace="net.scit.dao.TodoMapper">	<!-- 자바의 인터페이스 -->
	<select id="listByPerson" parameterType="map" resultType="Todo">
		SELECT *
		FROM todo
		WHERE usr = #{usr}
		AND
		<choose>
			<when test="option == 'writer'">writer</when>
			<when test="option == 'title'">title</when>
			<when test="option == 'text'">text</when>
		</choose>
	</select>

	<select id="listByTeam" parameterType="map" resultType="Todo">
		SELECT *
		FROM todo
		WHERE
	</select>

	<select id="searchTodo" parameterType="map" resultType="Todo">
		SELECT *
		FROM todo
		WHERE usr = #{usr}
		AND t_content LIKE %#{searchWord}% </select>

	<insert id="insertTodo" parameterType="Todo">
		INSERT INTO todo
		VALUES(t_num_seq.NEXTVAL, #{usrid}, #{teamnum}, #{t_state},
		#{t_priority}, sysdate)
	</insert>

	<update id="updateTodo" parameterType="Todo">
		UPDATE todo
		SET usrid =
		#{usrid}, teamnum = #{teamnum}, t_state = #{t_state}, t_priority =
		#{t_priority}
		WHERE t_num = #{t_num}
	</update>

	<delete id="deleteTodo" parameterType="string">
		DELETE FROM todo
		WHERE
		t_num = #{t_num}
	</delete>
</mapper>